(()=>{"use strict";const e=[{component:"model",attributes:["lightmapped","lightmapSizeMultiplier","castShadowsLightMap","lightMapped","lightMapSizeMultiplier","isStatic","layers","batchGroupId"]}];function t(e){delete e.parent,delete e.resource_id;let o=[];for(let t in e.components)e.components.hasOwnProperty(t)&&(e.components[t].enabled?s(t,e.components[t]):o.push(t));if(o.forEach((t=>{delete e.components[t]})),e.components&&e.components.script){let t=e.components.script.scripts;e.components.script=t;for(let e in t){let o=t[e],i=o.attributes;n(i),o=i,t[e]=o}}else for(let t in e.components)e.components.hasOwnProperty(t)&&n(e.components[t]);e.template_id&&delete e.template_id,e.template_ent_ids&&delete e.template_ent_ids,e.children&&e.children.forEach((e=>t(e)))}function n(e){let t=[];for(let s in e)if(e.hasOwnProperty(s))if(Array.isArray(e[s]))e[s]=e[s].map((e=>{if(a(e)){let t=o(e);return t&&("json"!==l(e)&&"material"!==l(e)?t=r(t):"json"!==i(t)&&(t=`${t}.json`)),t}return e}));else if(a(e[s])){let t=o(e[s]);t&&("json"!==l(e[s])&&"material"!==l(e[s])?t=r(t):"json"!==i(t)&&(t=`${t}.json`)),e[s]=t}else n=e[s],1===`${n}`.match(/[\d|\w]{8}-[\d|\w]{4}-4[\d|\w]{3}-[\d|\w]{4}-[\d|\w]{12}/)?.length&&t.push(s);var n;t.forEach((t=>delete e[t]))}function o(e){let t=editor.assets.get(e);return t?t.json().name:null}function i(e){return e.split(".").pop()}function l(e){let t=editor.assets.get(e);return t?t.json().type:null}function r(e){return e.replace(/\.[^/.]+$/,"")}function a(e){return 1===`${e}`.match(/[\d]{8,10}/)?.length}function s(t,n){e.forEach((e=>{e.component===t&&e.attributes.forEach((e=>{delete n[e]}))}))}window.addEventListener("FIND_ENTITY",(function(e){let t=e.detail.method,n=e.detail.value;switch(t){case"tag":!function(e){let t=editor.entities.root.listByTag(e.split(","));0!==t.length?(editor.selection.clear(),t.forEach((e=>editor.selection.add(e))),window.dispatchEvent(new CustomEvent("FIND_ENTITY_RESULT",{detail:t.length}))):console.log(`No entities found with tag: ${tag}`)}(n);break;case"name":!function(e){let t=editor.entities.list().filter((t=>t.viewportEntity.name===e));0!==t.length?(editor.selection.clear(),t.forEach((e=>editor.selection.add(e))),window.dispatchEvent(new CustomEvent("FIND_ENTITY_RESULT",{detail:t.length}))):console.log(`No entities found with name: ${e}`)}(n);break;case"regex":!function(e){let t=editor.entities.list().filter((t=>t.viewportEntity.name.match(e)));0!==t.length?(editor.selection.clear(),t.forEach((e=>editor.selection.add(e))),window.dispatchEvent(new CustomEvent("FIND_ENTITY_RESULT",{detail:t.length}))):console.log(`No entities found with regex: ${e}`)}(n);break;default:return void console.error("Invalid find method")}})),window.addEventListener("EXPORT_ENTITIES",(function(e){let n=e.detail.exportType,o=e.detail.downloadFile;console.log(n,o),function(e=!0,n=!1){let o,i=editor.selection.items;if(0!==i.length){if(1===i.length)o=e?i[0].jsonHierarchy():i[0].json(),t(o),o=JSON.stringify(o);else{let n=[];i.forEach((o=>{let i=e?o.jsonHierarchy():o.json();t(i),n.push(i)})),o=JSON.stringify(n)}n?function(e,t,n){let o=new Blob([e],{type:"application/json"});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(o,t);else{let e=document.createElement("a"),n=URL.createObjectURL(o);e.href=n,e.download=t,document.body.appendChild(e),e.click(),setTimeout((function(){document.body.removeChild(e),window.URL.revokeObjectURL(n)}),0)}}(o,`${1===i.length?i[0].viewportEntity.name:"export"}.json`):(!function(e){let t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.focus(),t.select(),document.execCommand("copy"),document.body.removeChild(t)}(o),alert("Copied to clipboard"))}else alert("No entities selected")}("hierarchy"===n,o)}))})();
//# sourceMappingURL=injectedScript.js.map